function y = filter30hz(x)
%FILTER30HZ Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.1 and the DSP System Toolbox 9.3.
% Generated on: 24-Mar-2017 00:24:11

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % Equiripple Lowpass filter designed using the FIRPM function.
    %
    % % All frequency values are in Hz.
    % Fs = 4800;  % Sampling Frequency
    %
    % Fpass = 30;              % Passband Frequency
    % Fstop = 100;             % Stopband Frequency
    % Dpass = 0.057501127785;  % Passband Ripple
    % Dstop = 0.0001;          % Stopband Attenuation
    % dens  = 20;              % Density Factor
    %
    % % Calculate the order from the parameters using FIRPMORD.
    % [N, Fo, Ao, W] = firpmord([Fpass, Fstop]/(Fs/2), [1 0], [Dpass, Dstop]);
    %
    % % Calculate the coefficients using the FIRPM function.
    % b  = firpm(N, Fo, Ao, W, {dens});
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [-0.000165546220380894 -7.05853920074885e-05 ...
        -8.48614950773793e-05 -0.000100434638994178 -0.000117251621096619 ...
        -0.00013521403247208 -0.000154220648542706 -0.000174123085155991 ...
        -0.000194750929778663 -0.000215890836055438 -0.00023731152165828 ...
        -0.000258717599149484 -0.000279775348826026 -0.000300097340912473 ...
        -0.000319271069811595 -0.000336825366678013 -0.000352268518887471 ...
        -0.000365060254450436 -0.000374635594222857 -0.000380352434454669 ...
        -0.000381542745240355 -0.000377484626897162 -0.000367463428276882 ...
        -0.000350713517976941 -0.000326479877923824 -0.000293931976942366 ...
        -0.000252234608545905 -0.000200482978510541 -0.000137868982033756 ...
        -6.35632080035884e-05 2.3217937176318e-05 0.000123434155564819 ...
        0.000237904675752039 0.000367387180346685 0.000512453070856518 ...
        0.000674230064606028 0.000853054911242182 0.0010496435841368 ...
        0.00126465436498869 0.00149844144293951 0.00175155873261002 ...
        0.00202423186375486 0.00231680621028866 0.00262936137576857 ...
        0.00296201276392173 0.00331466060552305 0.0036872142452594 ...
        0.00407935480967894 0.00449073747883709 0.00492081734266365 ...
        0.00536902072067687 0.00583457128049248 0.00631664886284915 ...
        0.00681424186280308 0.00732628368329389 0.00785151884727467 ...
        0.00838865418655958 0.00893623861035024 0.00949276958959415 ...
        0.0100565723315202 0.0106259453364926 0.0111990727463981 ...
        0.0117741133142688 0.0123490849997265 0.0129220042985418 ...
        0.0134908302668985 0.014053532148454 0.0146079519294249 ...
        0.0151520121006451 0.0156836178420658 0.0162006791669269 ...
        0.0167010840419971 0.0171828871268234 0.0176440287006981 ...
        0.0180826663022121 0.018496875560529 0.0188849806159502 ...
        0.0192452653851827 0.0195762153868612 0.0198763510497191 ...
        0.020144409976899 0.0203791647822707 0.0205796135868183 ...
        0.0207448338041319 0.020874134925388 0.0209668935606105 ...
        0.0210227263991547 0.0210413505207052 0.0210227263991547 ...
        0.0209668935606105 0.020874134925388 0.0207448338041319 ...
        0.0205796135868183 0.0203791647822707 0.020144409976899 ...
        0.0198763510497191 0.0195762153868612 0.0192452653851827 ...
        0.0188849806159502 0.018496875560529 0.0180826663022121 ...
        0.0176440287006981 0.0171828871268234 0.0167010840419971 ...
        0.0162006791669269 0.0156836178420658 0.0151520121006451 ...
        0.0146079519294249 0.014053532148454 0.0134908302668985 ...
        0.0129220042985418 0.0123490849997265 0.0117741133142688 ...
        0.0111990727463981 0.0106259453364926 0.0100565723315202 ...
        0.00949276958959415 0.00893623861035024 0.00838865418655958 ...
        0.00785151884727467 0.00732628368329389 0.00681424186280308 ...
        0.00631664886284915 0.00583457128049248 0.00536902072067687 ...
        0.00492081734266365 0.00449073747883709 0.00407935480967894 ...
        0.0036872142452594 0.00331466060552305 0.00296201276392173 ...
        0.00262936137576857 0.00231680621028866 0.00202423186375486 ...
        0.00175155873261002 0.00149844144293951 0.00126465436498869 ...
        0.0010496435841368 0.000853054911242182 0.000674230064606028 ...
        0.000512453070856518 0.000367387180346685 0.000237904675752039 ...
        0.000123434155564819 2.3217937176318e-05 -6.35632080035884e-05 ...
        -0.000137868982033756 -0.000200482978510541 -0.000252234608545905 ...
        -0.000293931976942366 -0.000326479877923824 -0.000350713517976941 ...
        -0.000367463428276882 -0.000377484626897162 -0.000381542745240355 ...
        -0.000380352434454669 -0.000374635594222857 -0.000365060254450436 ...
        -0.000352268518887471 -0.000336825366678013 -0.000319271069811595 ...
        -0.000300097340912473 -0.000279775348826026 -0.000258717599149484 ...
        -0.00023731152165828 -0.000215890836055438 -0.000194750929778663 ...
        -0.000174123085155991 -0.000154220648542706 -0.00013521403247208 ...
        -0.000117251621096619 -0.000100434638994178 -8.48614950773793e-05 ...
        -7.05853920074885e-05 -0.000165546220380894]);
end

y = step(Hd,double(x));


% [EOF]
